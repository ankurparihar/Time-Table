var timetable_cells,timetable_data={rows:{data:["Time/Day","08:00 - 08:55","09:00 - 09:55","10:00 - 10:55","11:05 - 12:00","12:05 - 01:00","01:00 - 02:00","02:00 - 02:55","03:00 - 03:55","04:05 - 05:00","05:05 - 06:00"]},cols:{data:["Time/Day","Monday","Tuesday","Wednesday","Thursday","Friday"]},custom_attributes:{subj:["[CSN-501]","[CSN-502]","[CSN-503]","[CSN-517]","[CSN-499]"],prof:["SG","MM","DT","SK","PPR","RT"],btch:["B.Tech IV","M.Tech I","CS1","CS2"],vnue:["LHC-206","W-201","W-202","S-310","S-301"]},custom_attributes_concat:{prof:"+",btch:" + "},cells:[[],[[],["","","",""],["1","1","0 1","0"],["2","2","0 1","4"],["","","",""],["3","3","0 1","0"],["","","",""],["","","",""],["4","4 5","0 2","3"],["","","",""],["","","",""]],[[],["","","",""],["1","1","0 1","0"],["0","0","0 1","0"],["","","",""],["3","3","0 1","0"],["","","",""],["","","",""],["","","",""],["","","",""],["","","",""]],[[],["","","",""],["","","",""],["2","2","0 1","4"],["","","",""],["","","",""],["","","",""],["1","1","0","2"],["1","1","1","2"],["","","",""],["","","",""]],[[],["","","",""],["1","1","0 1","0"],["0","0","0 1","0"],["2","2","0 1","4"],["3","3","0 1","0"],["","","",""],["4","4 5","0 3","3"],["","","",""],["3","3","1","1"],["3","3","0","1"]],[[],["","","",""],["","","",""],["0","0","0 1","0"],["","","",""],["","","",""],["","","",""],["0","0","0","1"],["0","0","1","1"],["","","",""],["","","",""],["","","",""]]],customInnerHTML:[{cell:[6,1],data:"<b>Lunch</b>"}],span:[{row:[6,1],col:[1,5]},{row:[8,2],col:[1,1]},{row:[7,2],col:[4,1]}]},table=document.getElementById("timetable"),timetable_options=document.getElementById("timetable_options"),timetable_flip_select=document.getElementById("button_flip_select");function timetableGetCellTemplate(e){var t=document.createElement("td"),l=0;for(var a in timetable_data.custom_attributes){var i=document.createElement("p");if(i.classList.add(a),e)e[l].split(" ").forEach(e=>{i.classList.add(a+e)});t.appendChild(i),++l}return t}function deployGrid(){table.innerHTML="";for(var e=document.createElement("tr"),t=0;t<timetable_data.cols.data.length;++t){var l=document.createElement("th");l.classList.add("c"+t,"r0"),e.appendChild(l)}table.appendChild(e);for(t=1;t<timetable_data.rows.data.length;++t){e=document.createElement("tr");var a=document.createElement("td");a.classList.add("c0","r"+t),e.appendChild(a);for(var i=1;i<timetable_data.cols.data.length;++i)(a=timetableGetCellTemplate(timetable_data.cells[i][t])).classList.add("c"+i,"r"+t),e.appendChild(a);table.appendChild(e)}timetable_cells=table.querySelectorAll("td, th")}function fillRowTitles(){for(var e=timetable_data.rows.data,t=0;t<e.length;++t)document.querySelector(".r"+t).innerHTML=e[t]}function fillColumnTitles(){for(var e=timetable_data.cols.data,t=0;t<e.length;++t)document.querySelector(".c"+t).innerHTML=e[t]}function fillCustomAttributes(){for(var e in timetable_data.custom_attributes){document.querySelectorAll("table td p."+e).forEach(t=>{var l=Array.from(t.classList),a=l.length;if(2==a)t.innerHTML=timetable_data.custom_attributes[e][l[1].replace(e,"")];else if(a>2){a=l.slice(1);for(var i=0;i<a.length;++i)a[i]=a[i].replace(e,"");var c=timetable_data.custom_attributes_concat[e],n=timetable_data.custom_attributes[e][a[0]];for(i=1;i<a.length;++i)n+=c+timetable_data.custom_attributes[e][a[i]];t.innerHTML=n}})}}var mouseclicked=0,cell_deactivate=!1,active_cells=0,key_ctrl_down=!1,copied_content={copied:!1,content:""};function timetableDeplayEventListerners(){table.addEventListener("mousedown",function(){mouseclicked++}),table.addEventListener("mouseup",function(){mouseclicked--}),table.addEventListener("mousemove",e=>{var t=e.target;if(1==mouseclicked){for(;"td"!=t.tagName.toLowerCase()&&"th"!=t.tagName.toLowerCase();)t=t.parentElement;cell_deactivate||t.classList.contains("active")?cell_deactivate&&t.classList.contains("active")&&(t.classList.remove("active"),active_cells--):(t.classList.add("active"),active_cells++),updateTimetableOptions()}}),document.addEventListener("keydown",e=>{switch(e.keyCode){case 17:key_ctrl_down=!0;break;case 67:key_ctrl_down&&timetableCopyCell();break;case 86:key_ctrl_down&&timetablePasteCell();break;case 46:timetableClearCells()}}),document.addEventListener("keyup",e=>{17==e.keyCode&&(key_ctrl_down=!1)}),timetable_cells.forEach(e=>{e.addEventListener("click",function(){})}),table.addEventListener("click",e=>{var t=e.target;if("table"!=t.tagName.toLowerCase()){for(;"td"!=t.tagName.toLowerCase()&&"th"!=t.tagName.toLowerCase();)t=t.parentElement;key_ctrl_down?t.classList.contains("active")?(t.classList.remove("active"),active_cells--):(t.classList.add("active"),active_cells++):(timetableDeselectAll(),t.classList.contains("active")||(t.classList.add("active"),active_cells++)),updateTimetableOptions()}})}function timetable_addRow(){}function timetable_addCol(){}function timetableFlipBatchSelect(){timetable_flip_select.innerHTML=cell_deactivate?"Batch cell select":"Batch cell deselect",cell_deactivate=!cell_deactivate}function timetableCopyCell(){var e=table.querySelectorAll("td.active");if(1==e.length){var t=e[0];t.classList.contains("r0")||t.classList.contains("c0")||(copied_content.copied=!0,copied_content.content=t.innerHTML)}}function timetablePasteCell(){copied_content.copied&&(table.querySelectorAll("td.active").forEach(e=>{e.classList.contains("r0")||e.classList.contains("c0")||(e.innerHTML=copied_content.content)}),updateTimetableOptions())}function timetableClearCells(){table.querySelectorAll("td.active").forEach(e=>{e.innerHTML=timetableGetCellTemplate().innerHTML}),updateTimetableOptions()}function timetableDeselectAll(){timetable_cells.forEach(e=>{e.classList.remove("active")}),active_cells=0,updateTimetableOptions()}function showSingleCellOptions(){var e=table.querySelectorAll("td.active, th.active"),t=timetable_options.querySelector("#options");if(t.innerHTML="",0==e.length&&(timetable_options.querySelector("#desc").innerHTML="No cell selected"),1==e.length){var l=e[0];if(l.classList.contains("r0")||l.classList.contains("c0"))timetable_options.querySelector("#desc").innerHTML="Header Cell Options",t.innerHTML='<input type="text" tabindex=0 value="'+table.querySelector(".active").innerText+'" oninput=updateSingleCellOption("header")></input>';else for(var a in timetable_options.querySelector("#desc").innerHTML="Data Cell options",timetable_data.custom_attributes){var i=document.createElement("select");i.id="select_"+a,i.setAttribute("onchange","updateSingleCellOption('select_"+a+"')"),timetable_data.custom_attributes[a].forEach(e=>{var t=document.createElement("option");t.value=e,t.innerHTML=e,i.appendChild(t)}),i.value=table.querySelector(".active p."+a).innerHTML;var c=document.createElement("div"),n=document.createElement("p");n.innerHTML=a,c.appendChild(n),c.appendChild(i),t.appendChild(c)}}}function showGroupCellOptions(){for(var e=table.querySelectorAll(".r0.active, .c0.active"),t=[],l=(timetable_options.querySelector("#options"),1);l<timetable_data.rows.data.length;++l)for(var a=1;a<timetable_data.cols.data.length;++a){var i=table.querySelector(".r"+l+".c"+a);i&&i.classList.contains("active")&&t.push(i)}e.length>0&&0==t.length?timetable_options.querySelector("#desc").innerHTML=active_cells+" header cells selected":0==e.length&&t.length>0?timetable_options.querySelector("#desc").innerHTML=active_cells+" data cells selected":timetable_options.querySelector("#desc").innerHTML=active_cells+" Mixed cells selected"}function updateTimetableOptions(){active_cells<2?showSingleCellOptions():showGroupCellOptions()}function updateSingleCellOption(e){if("header"==e)table.querySelector(".active").innerHTML=timetable_options.querySelector("input").value;else if(e.match("select_")){var t=e.replace("select_","");table.querySelector(".active p."+t).innerHTML=timetable_options.querySelector("select#select_"+t).value}}function fillCustomInnerHTML(){timetable_data.customInnerHTML.forEach(e=>{table.querySelector(".r"+e.cell[0]+".c"+e.cell[1]).innerHTML=e.data})}function deployCellSpans(){timetable_data.span.forEach(e=>{for(var t=e.row[0],l=e.col[0],a=e.row[1],i=e.col[1],c=table.querySelector(".r"+t+".c"+l),n="",o=1;o<a;++o){n+=(r=table.querySelector(".r"+(t+o)+".c"+l)).innerHTML,r.remove()}for(o=1;o<i;++o){var r;n+=(r=table.querySelector(".r"+t+".c"+(l+o))).innerHTML,r.remove()}c.setAttribute("rowspan",a),c.setAttribute("colspan",i),c.innerHTML=c.innerHTML+n})}function resetTimeTableVariables(){mouseclicked=0,cell_deactivate=!1,active_cells=0,key_ctrl_down=!1,copied_content={copied:!1,content:""},timetable_options.querySelector("#options").innerHTML="",timetable_options.querySelector("#desc").innerHTML="No cell selected"}function showTimeTable(){resetTimeTableVariables(),deployGrid(),fillRowTitles(),fillColumnTitles(),fillCustomAttributes(),timetableDeplayEventListerners(),fillCustomInnerHTML(),deployCellSpans(),document.getElementById("demo_content").classList.remove("flex")}window.onload=showTimeTable;